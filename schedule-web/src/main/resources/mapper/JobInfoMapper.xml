<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="swa.db.mapper.JobInfoMapper">

    <select id="selectSelective" resultType="swa.db.entity.JobInfo" parameterType="swa.db.entity.JobInfo">
        select job_name as jobName,
        app_name as appName,
        bean_name as beanName,
        method_name as methodName,
        cron_param as cronParam
        from jobInfo
        where 1=1
        <trim suffixOverrides=",">
            <if test="jobName != null and jobName != ''">
                AND j.job_name = #{jobName}
            </if>
            <if test="appName != null and appName != ''">
                AND j.app_name = #{appName}
            </if>
            <if test="beanName != null and beanName != ''">
                AND j.bean_name = #{beanName}
            </if>
            <if test="methodName != null and methodName != ''">
                AND j.method_name = #{methodName}
            </if>
            <if test="cronParam != null and cronParam != ''">
                AND j.cron_param = #{cronParam}
            </if>
            <if test="createTime != null and createTime != ''">
                AND j.create_time = #{createTime}
            </if>
            <if test="updateTime != null and updateTime != ''">
                AND j.update_time = #{updateTime}
            </if>
        </trim>
    </select>

    <insert id="insertJob" parameterType="swa.db.entity.JobInfo">
        INSERT INTO jobInfo
        (
        job_code
        ,app_name
        ,bean_name
        ,method_name
        )
        values
        (
        #{jobCode}
        ,#{appName}
        ,#{beanName}
        ,#{methodName}
        )
    </insert>


    <update id="updateJobInfo" parameterType="swa.db.entity.JobInfo">
        UPDATE jobInfo
        <trim prefix="SET" suffixOverrides=",">
            <if test="param!=null">
                param=#{param}
            </if>
            <if test="scheduleAddr!=null">
                schedule_addr=#{scheduleAddr}
            </if>
            <if test="cronParam != null">
                cron_param = #{cronParam},
            </if>
        </trim>
        WHERE
        id = #{id}
    </update>


    <select id="selectByJobId" parameterType="java.lang.Long" resultType="swa.db.entity.JobInfo">
        SELECT
        id as id
        ,job_code AS jobCode
        ,app_name AS appName
        ,bean_name AS beanName
        ,method_name AS methodName
        ,cron_param AS cronParam
        ,schedule_addr as scheduleAddr
        FROM jobInfo
        WHERE
        id = #{jobId}
    </select>

    <select id="selectByJobCode" parameterType="java.lang.Integer" resultType="swa.db.entity.JobInfo">
        SELECT
        job_code AS jobCode
        ,app_name AS appName
        ,bean_name AS beanName
        ,method_name AS methodName
        ,cron_param AS cronParam
        ,schedule_addr as scheduleAddr
        FROM jobInfo
        WHERE
        id = #{jobCode}
    </select>

    <select id="selectByUniqKey" resultType="swa.db.entity.JobInfo">
    SELECT
    id as id
        ,job_code AS jobCode
        ,app_name AS appName
        ,bean_name AS beanName
        ,method_name AS methodName
        ,cron_param AS cronParam
        ,schedule_addr as scheduleAddr
        FROM jobInfo
        WHERE
        app_name = #{appName} and bean_name=#{beanName} and method_name=#{methodName}
</select>


</mapper>